/**
 * Hero Section — "TOP" Showcase
 *
 * Minimal hero: centered "TOP" badge + row of 5 top wallpapers
 * No text, no branding, no explore button
 * Click any image → opens wallpaper modal
 * Staggered entrance animation
 */

'use client';

import { useModalStore } from '@/stores/modalStore';
import { cn } from '@/lib/utils/cn';
import { TrendingUp } from 'lucide-react';

interface FeaturedWallpaper {
    id: string;
    title: string;
    image_url: string;
    thumbnail_url: string | null;
}

interface HeroSectionProps {
    featured: FeaturedWallpaper[];
}

export function HeroSection({ featured }: HeroSectionProps) {
    const { openModal } = useModalStore();

    // Top 5 images for the showcase
    const topImages = featured.slice(0, 5);

    if (topImages.length === 0) return null;

    const handleClick = (id: string) => {
        openModal('wallpaper', { wallpaperId: id });
    };

    return (
        <section className="home-section pt-6 pb-4 px-4 md:px-6 lg:px-8">
            <div className="max-w-5xl mx-auto">

                {/* "TOP" Badge — centered */}
                <div className="flex justify-center mb-5">
                    <div className="badge-pulse inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-accent-primary/10 border border-accent-primary/25">
                        <TrendingUp className="w-4 h-4 text-accent-primary" />
                        <span className="text-sm font-semibold tracking-wider uppercase text-accent-primary">
                            Top
                        </span>
                    </div>
                </div>

                {/* 5 images in one row */}
                <div className="grid grid-cols-3 sm:grid-cols-5 gap-2 md:gap-3 stagger-grid">
                    {topImages.map((img, idx) => (
                        <div
                            key={img.id}
                            onClick={() => handleClick(img.id)}
                            role="button"
                            tabIndex={0}
                            onKeyDown={(e) => {
                                if (e.key === 'Enter' || e.key === ' ') {
                                    e.preventDefault();
                                    handleClick(img.id);
                                }
                            }}
                            className={cn(
                                'card-3d group relative aspect-[9/16] overflow-hidden rounded-xl cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-primary',
                                // On mobile (3 cols), hide the 4th and 5th images
                                idx >= 3 && 'hidden sm:block'
                            )}
                        >
                            <div className="card-3d-inner w-full h-full">
                                <img
                                    src={img.thumbnail_url || img.image_url}
                                    alt={img.title}
                                    loading={idx < 3 ? 'eager' : 'lazy'}
                                    className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                />
                                {/* Gradient overlay */}
                                <div className="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
                                {/* Title on hover */}
                                <div className="absolute inset-x-0 bottom-0 p-2 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300">
                                    <p className="text-xs font-medium text-white line-clamp-1">
                                        {img.title}
                                    </p>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>

            </div>
        </section>
    );
}
